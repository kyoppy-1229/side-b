:root{
  --bg:#0b0d12;
  --panel:#121522;
  --panel-2:#161a2a;
  --accent:#67a6ff;
  --ok:#7cffc2;
  --warn:#ffd36f;
  --danger:#ff7c9a;
}
*{box-sizing:border-box}
button{cursor:pointer}
.container{max-width:960px;margin:0 auto;padding:16px}
.card{background:var(--panel);border:1px solid #1c2240;border-radius:14px;padding:14px;box-shadow:0 0 0 1px #0c1224 inset;}
.hr{border:0;border-top:1px solid #2a315a;margin:16px 0}
.pixel{image-rendering: pixelated;image-rendering: crisp-edges}
.btn{background:var(--panel-2);border:1px solid #2a315a;border-radius:12px;padding:10px 14px;color:#e8e8e8}
.btn:hover{background:#1a1f34}
.btn-primary{border-color:#3156a6;background:#1b2340}
.btn-primary:hover{background:#22305c}
.link{color:var(--accent);text-decoration:underline}
.chat{display:flex;gap:12px;margin:14px 0;align-items:flex-end}
.chat.me{flex-direction:row-reverse}
.chat .avatar{
  width:44px;height:44px;border-radius:50%;overflow:hidden;
  box-shadow:0 14px 28px rgba(44,76,149,0.22);
  border:2px solid #fff;
  background:#fff;
  flex-shrink:0;
}
.chat .avatar img{width:100%;height:100%;object-fit:cover;display:block}
.chat .bubble-wrap{display:flex;flex-direction:column;gap:6px;align-items:flex-start;flex:1;min-width:0}
.chat.me .bubble-wrap{align-items:flex-end}
.chat .from{font-size:12px;color:#5a6fae;font-weight:600;letter-spacing:0.2px;margin-left:4px}
.chat .bubble{max-width:min(100%,520px);padding:12px 16px;border-radius:18px 18px 18px 8px;line-height:1.6;border:1px solid #dae2ff;background:#fff;color:#27345c;box-shadow:0 14px 32px rgba(44,76,149,0.12);word-break:break-word}
.chat.me .bubble{border-radius:18px 18px 8px 18px;background:linear-gradient(135deg,#5c8dff 0%,#7da7ff 100%);color:#fff;border:none;box-shadow:0 18px 38px rgba(88,132,255,0.28)}
.toolbar{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
kbd{background:#17203d;border:1px solid #2a315a;border-bottom-width:2px;border-radius:6px;padding:0 6px}
.small{opacity:.85;font-size:12px}
nav.top{
  position:sticky;top:0;z-index:10;background:linear-gradient(180deg,#0b0d12 0,#0b0d12cc 70%,#0b0d1200);
  padding:10px 0 6px;border-bottom:1px solid #1b2241;margin-bottom:8px;
}
nav.top .inner{display:flex;gap:12px;align-items:center;justify-content:space-between}
.brand{font-weight:700;letter-spacing:.5px}
code.inline{background:#151a2a;border:1px solid #27305c;padding:2px 6px;border-radius:6px}
pre.code{background:#11162a;border:1px solid #27305c;padding:10px;border-radius:8px;overflow:auto}
footer{opacity:.7;margin-top:24px;font-size:12px}
.badge{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;border:1px solid #2a315a;background:#141a2b}
.badge .dot{width:8px;height:8px;border-radius:999px;background:var(--ok)}
.grid{display:grid;grid-template-columns:1fr;gap:12px}
@media (min-width: 800px){
  .grid{grid-template-columns: 1fr 340px;}
}


/* --- Chat (LINE-like) --- */
.chat-wrap{
  height: 520px; /* fixed viewport */
  overflow-y: auto;
  padding: 8px 6px;
  background: #0f1220;
  border: 1px solid #242b51;
  border-radius: 14px;
}
.chat-row{display:flex;gap:8px;margin:10px 0;align-items:flex-end}
.chat-row.me{flex-direction: row-reverse}
.avatar{
  width: 36px;height: 36px;border-radius: 12px;
  background:#1b2140;border:1px solid #2a315a;
  display:flex;align-items:center;justify-content:center;font-weight:700;
  box-shadow:0 0 0 1px #0c1224 inset;
}
.avatar .ini{font-size:12px;color:#9bb2ff}
.name{font-size:11px;color:#8ea0d9;margin:0 6px 2px 6px}
.bubble2{
  max-width: 70%;
  padding:10px 12px;border-radius:14px 14px 14px 4px;
  line-height:1.6;border:1px solid #293053;background:#1e253c;color:#e9ecff
}
.chat-row.me .bubble2{
  border-radius:14px 14px 4px 14px;
  background:#24365f;
}
.time{font-size:10px;color:#8a95c7;margin:0 8px}


/* Chat area: fixed height & scroll, append at bottom */
.chatbox {
  height: 480px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
}
.chatbox::-webkit-scrollbar{width:8px}
.chatbox::-webkit-scrollbar-thumb{background:#c3cffc;border-radius:8px}


.choice-bar{display:flex;gap:8px;justify-content:center;margin-top:8px}
.choice{padding:8px 12px;border:1px solid #2a315a;border-radius:10px;background:#141a2b}
.choice.active{outline:2px solid var(--accent)}
